<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text-Only Social Media App</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f5f5f5; }
  header { background:#1976d2; color:white; padding:15px; text-align:center; }
  nav { display:flex; justify-content:space-around; background:#eee; padding:10px 0; }
  nav button { background:none; border:none; font-size:16px; cursor:pointer; }
  .active-tab { font-weight:bold; border-bottom:2px solid #1976d2; }
  .container { padding:10px; max-width:600px; margin:auto; }
  .post { background:white; padding:10px; margin-bottom:10px; border-radius:8px; }
  input, textarea { width:100%; padding:8px; margin:5px 0; border-radius:5px; border:1px solid #ccc; }
  button { background:#1976d2; color:white; padding:8px 12px; border:none; border-radius:5px; cursor:pointer; }
  .tab-content { display:none; }
  .tab-content.active { display:block; }
</style>
</head>
<body>

<header>Text-Only Social Media App</header>
<nav>
  <button id="tab-feed" class="active-tab">Feed</button>
  <button id="tab-my-posts">My Posts</button>
  <button id="tab-profile">Profile</button>
</nav>

<div class="container">

  <!-- Login / Signup -->
  <div id="auth-section">
    <h2>Login / Sign Up</h2>
    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">
    <button id="login-btn">Login</button>
    <button id="signup-btn">Sign Up</button>
    <p id="auth-msg" style="color:red;"></p>
  </div>

  <!-- Feed Tab -->
  <div id="feed-tab" class="tab-content active">
    <h3>Create Post</h3>
    <textarea id="post-text" placeholder="What's on your mind?"></textarea>
    <button id="post-btn">Post</button>
    <hr>
    <div id="feed"></div>
  </div>

  <!-- My Posts Tab -->
  <div id="my-posts-tab" class="tab-content">
    <h3>My Posts</h3>
    <div id="my-posts"></div>
  </div>

  <!-- Profile Tab -->
  <div id="profile-tab" class="tab-content">
    <h3>Profile</h3>
    <p>Name: <span id="profile-name"></span></p>
    <p>Bio: <span id="profile-bio"></span></p>
    <p>Followers: <span id="followers-count">0</span> | Following: <span id="following-count">0</span></p>
    <h4>Edit Profile</h4>
    <input type="text" id="edit-name" placeholder="Name">
    <input type="text" id="edit-bio" placeholder="Bio">
    <button id="save-profile-btn">Save Profile</button>
  </div>

</div>

<script>
  // Firebase Config - replace with your project details
  const firebaseConfig = {
  apiKey: "AIzaSyBxY0do9AYlt9NSHEA0jvUAHhKiOhnctt0",
  authDomain: "chatbot-bd1b4.firebaseapp.com",
  projectId: "chatbot-bd1b4",
  storageBucket: "chatbot-bd1b4.firebasestorage.app",
  messagingSenderId: "178313205826",
  appId: "1:178313205826:web:e4622b7f328e541ea775db",
  measurementId: "G-Q217QD5HH9"
};

  firebase.initializeApp(firebaseConfig);

  const auth = firebase.auth();
  const db = firebase.database();
  let currentUser = null;

  const authSection = document.getElementById('auth-section');
  const loginBtn = document.getElementById('login-btn');
  const signupBtn = document.getElementById('signup-btn');
  const authMsg = document.getElementById('auth-msg');

  loginBtn.onclick = () => {
    const email = document.getElementById('email').value;
    const pass = document.getElementById('password').value;
    if(!email || !pass){ authMsg.innerText="Enter email/password"; return; }
    auth.signInWithEmailAndPassword(email, pass)
      .then(res => { currentUser=res.user; initApp(); })
      .catch(err=>authMsg.innerText=err.message);
  };

  signupBtn.onclick = () => {
    const email = document.getElementById('email').value;
    const pass = document.getElementById('password').value;
    if(!email || !pass){ authMsg.innerText="Enter email/password"; return; }
    auth.createUserWithEmailAndPassword(email, pass)
      .then(res => { 
        currentUser=res.user; 
        db.ref('users/'+currentUser.uid).set({name:'', bio:'', followers:0, following:0});
        initApp(); 
      })
      .catch(err=>authMsg.innerText=err.message);
  };

  function initApp(){
    authSection.style.display='none';
    document.getElementById('feed-tab').classList.add('active');
    loadFeed();
    loadProfile();
    loadMyPosts();
  }

  // Tabs
  document.getElementById('tab-feed').onclick = ()=>switchTab('feed-tab');
  document.getElementById('tab-my-posts').onclick = ()=>switchTab('my-posts-tab');
  document.getElementById('tab-profile').onclick = ()=>switchTab('profile-tab');

  function switchTab(tabId){
    document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active-tab'));
    if(tabId==='feed-tab') document.getElementById('tab-feed').classList.add('active-tab');
    if(tabId==='my-posts-tab') document.getElementById('tab-my-posts').classList.add('active-tab');
    if(tabId==='profile-tab') document.getElementById('tab-profile').classList.add('active-tab');
  }

  // Posts
  document.getElementById('post-btn').onclick = () => {
    const text = document.getElementById('post-text').value;
    if(!text) return alert('Enter text to post');
    const postId = db.ref('posts').push().key;
    db.ref('posts/'+postId).set({uid: currentUser.uid, text, timestamp: Date.now()});
    document.getElementById('post-text').value='';
  };

  function loadFeed(){
    db.ref('posts').on('value', snap=>{
      const feed = document.getElementById('feed');
      feed.innerHTML='';
      const posts = snap.val();
      if(!posts) return;
      Object.keys(posts).sort((a,b)=>posts[b].timestamp - posts[a].timestamp).forEach(pid=>{
        const p = posts[pid];
        db.ref('users/'+p.uid).once('value').then(u=>{
          const user = u.val();
          const div = document.createElement('div');
          div.className='post';
          div.innerHTML = `<div><strong>${user.name||'User'}:</strong> ${p.text}</div>`;
          feed.appendChild(div);
        });
      });
    });
  }

  function loadProfile(){
    db.ref('users/'+currentUser.uid).on('value', snap=>{
      const user = snap.val();
      document.getElementById('profile-name').innerText = user.name || '';
      document.getElementById('profile-bio').innerText = user.bio || '';
      document.getElementById('followers-count').innerText = user.followers || 0;
      document.getElementById('following-count').innerText = user.following || 0;
    });
  }

  document.getElementById('save-profile-btn').onclick = () => {
    const name = document.getElementById('edit-name').value;
    const bio = document.getElementById('edit-bio').value;
    const updates = {};
    if(name) updates.name=name;
    if(bio) updates.bio=bio;
    db.ref('users/'+currentUser.uid).update(updates);
  };

  function loadMyPosts(){
    db.ref('posts').on('value', snap=>{
      const myPostsDiv = document.getElementById('my-posts');
      myPostsDiv.innerHTML='';
      const posts = snap.val();
      if(!posts) return;
      Object.keys(posts).filter(pid=>posts[pid].uid===currentUser.uid)
      .sort((a,b)=>posts[b].timestamp - posts[a].timestamp)
      .forEach(pid=>{
        const p = posts[pid];
        const div = document.createElement('div');
        div.className='post';
        div.innerHTML=`
          <div>${p.text}</div>
          <button onclick="editPost('${pid}')">Edit</button>
          <button onclick="deletePost('${pid}')">Delete</button>
        `;
        myPostsDiv.appendChild(div);
      });
    });
  }

  function editPost(pid){
    const newText = prompt('Edit your post text:');
    if(newText!==null) db.ref('posts/'+pid).update({text:newText});
  }

  function deletePost(pid){
    if(confirm('Delete this post?')) db.ref('posts/'+pid).remove();
  }
</script>
</body>
</html>
